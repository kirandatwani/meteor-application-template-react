{"version":3,"sources":["meteor://ðŸ’»app/index.ts","meteor://ðŸ’»app/imports/api/stuff/index.ts","meteor://ðŸ’»app/stuff.ts","meteor://ðŸ’»app/imports/api/stuff/stuff.ts","meteor://ðŸ’»app/imports/startup/both/index.ts","meteor://ðŸ’»app/accounts.ts","meteor://ðŸ’»app/imports/startup/server/accounts.ts","meteor://ðŸ’»app/imports/startup/server/index.ts","meteor://ðŸ’»app/imports/startup/server/stuff.ts","meteor://ðŸ’»app/main.ts","meteor://ðŸ’»app/server/main.ts"],"names":[],"mappings":"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","file":"/app.js","sourcesContent":[null,"import './stuff';\n",null,"import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Tracker } from 'meteor/tracker';\nimport simplSchema from 'simpl-schema';\n\n/** Create a Meteor collection. */\n// console.log('creating collection stuffs');\n// console.trace('creating collection stuffs');\n\nconst name: string = 'Stuffs';\n\nclass StuffCollection {\n  public static getInstance() {\n    if (!StuffCollection.instance) {\n      StuffCollection.instance = new StuffCollection();\n      if (!Mongo.Collection.get(name)) {\n        StuffCollection.instance.collection = new Mongo.Collection(name);\n      } else {\n        StuffCollection.instance.collection = Mongo.Collection.get(name);\n      }\n    }\n    return StuffCollection.instance;\n  }\n  private static instance: StuffCollection;\n  private collection: Mongo.Collection<any>;\n\n  private constructor() {\n    // nothing to do.\n  }\n  public getCollection() {\n    return this.collection;\n  }\n}\nconsole.time('Stuffs'); // tslint:disable-line\nconst Stuffs = StuffCollection.getInstance().getCollection();\nconsole.timeEnd('Stuffs'); // tslint:disable-line\n\n/** Create a schema to constrain the structure of documents associated with this collection. */\nconst StuffSchema = new simplSchema({\n  condition: {\n    allowedValues: ['excellent', 'good', 'fair', 'poor'],\n    defaultValue: 'good',\n    type: String,\n  },\n  name: String,\n  owner: String,\n  quantity: Number,\n}, { tracker: Tracker });\n\n/** Attach this schema to the collection. */\nStuffs.attachSchema(StuffSchema);\n\n/** Make the collection and schema available to other code. */\nexport { Stuffs, StuffSchema };\n","console.time('startup/both'); // tslint:disable-line\nimport '../../api/stuff';\nconsole.timeEnd('startup/both'); // tslint:disable-line\n",null,"import { Accounts } from 'meteor/accounts-base';\nimport { Roles } from 'meteor/alanning:roles';\nimport { Meteor } from 'meteor/meteor';\n\n/* eslint-disable no-console */\n\nfunction createUser(email, password, role) {\n  console.log(`  Creating user ${email}.`); // tslint:disable-line\n  const userID = Accounts.createUser({\n    email,\n    password,\n    username: email,\n  });\n  if (role === 'admin') {\n    Roles.addUsersToRoles(userID, 'admin');\n  }\n}\n\n/** When running app for first time, pass a settings file to set up a default user account. */\nif (Meteor.users.find().count() === 0) {\n  if (Meteor.settings.defaultAccounts) {\n    console.log('Creating the default user(s)'); // tslint:disable-line\n    Meteor.settings.defaultAccounts.map(({ email, password, role }) => createUser(email, password, role));\n  } else {\n    console.log('Cannot initialize the database!  Please invoke meteor with a settings file.'); // tslint:disable-line\n  }\n}\n","import './accounts';\nimport './stuff';\n","import { Roles } from 'meteor/alanning:roles';\nimport { Meteor } from 'meteor/meteor';\nconsole.time('startup/server'); // tslint:disable-line\nimport { Stuffs } from '../../api/stuff/stuff';\nconsole.timeEnd('startup/server'); // tslint:disable-line\n\n/** Initialize the database with a default data document. */\nfunction addData(data) {\n  console.log(`  Adding: ${data.name} (${data.owner})`); // tslint:disable-line\n  Stuffs.insert(data);\n}\n\n/** Initialize the collection if empty. */\nif (Stuffs.find().count() === 0) {\n  if (Meteor.settings.defaultData) {\n    console.log('Creating default data.'); // tslint:disable-line\n    Meteor.settings.defaultData.map((data) => addData(data));\n  }\n}\n\n/** This subscription publishes only the documents associated with the logged in user */\nMeteor.publish('Stuff', function publish() {\n  if (this.userId) {\n    const username = Meteor.users.findOne(this.userId).username;\n    return Stuffs.find({ owner: username });\n  }\n  return this.ready();\n});\n\n/** This subscription publishes all documents regardless of user, but only if the logged in user is the Admin. */\nMeteor.publish('StuffAdmin', function publish() {\n  if (this.userId && Roles.userIsInRole(this.userId, 'admin')) {\n    return Stuffs.find();\n  }\n  return this.ready();\n});\n",null,"console.time('server/main');\nimport '../imports/startup/both';\nimport '../imports/startup/server';\nconsole.timeEnd('server/main');\n\n"]}